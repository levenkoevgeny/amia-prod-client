import axios from "axios"
import { authHeaders } from "@/api/authAPI"

let base_url = "maps"

export const productsMapAPI = {
  async getItemsList(token, searchForm = { map_number: "", map_name: "" }) {
    let { map_number, map_name } = searchForm
    return axios.get(
      `${process.env.VUE_APP_BACKEND_PROTOCOL}://${process.env.VUE_APP_BACKEND_HOST}:${process.env.VUE_APP_BACKEND_PORT}/api/${base_url}/?map_number__icontains=${map_number}&map_name__icontains=${map_name}`,
      authHeaders(token)
    )
  },

  async updateList(url, token) {
    return axios.get(url, authHeaders(token))
  },

  async getItemData(token, itemId, searchForm = { menu_date: null }) {
    let { menu_date } = searchForm
    return axios.get(
      `${process.env.VUE_APP_BACKEND_PROTOCOL}://${process.env.VUE_APP_BACKEND_HOST}:${process.env.VUE_APP_BACKEND_PORT}/api/${base_url}/${itemId}/?menu_date=${menu_date}`,
      authHeaders(token)
    )
  },

  async addItem(token, itemData) {
    return axios.post(
      `${process.env.VUE_APP_BACKEND_PROTOCOL}://${process.env.VUE_APP_BACKEND_HOST}:${process.env.VUE_APP_BACKEND_PORT}/api/${base_url}/`,
      itemData,
      authHeaders(token)
    )
  },

  async addItemClone(token, itemData) {
    return axios.post(
      `${process.env.VUE_APP_BACKEND_PROTOCOL}://${process.env.VUE_APP_BACKEND_HOST}:${process.env.VUE_APP_BACKEND_PORT}/api/${base_url}/${itemData.map_parent}/make_map_clone/`,
      itemData,
      authHeaders(token)
    )
  },

  async updateItem(token, itemData) {
    return axios.put(
      `${process.env.VUE_APP_BACKEND_PROTOCOL}://${process.env.VUE_APP_BACKEND_HOST}:${process.env.VUE_APP_BACKEND_PORT}/api/${base_url}/${itemData.id}/`,
      itemData,
      authHeaders(token)
    )
  },

  async deleteItem(token, itemId) {
    return axios.delete(
      `${process.env.VUE_APP_BACKEND_PROTOCOL}://${process.env.VUE_APP_BACKEND_HOST}:${process.env.VUE_APP_BACKEND_PORT}/api/${base_url}/${itemId}/`,
      authHeaders(token)
    )
  },

  async getDishCategoriesList(token) {
    return axios.get(
      `${process.env.VUE_APP_BACKEND_PROTOCOL}://${process.env.VUE_APP_BACKEND_HOST}:${process.env.VUE_APP_BACKEND_PORT}/api/dish-categories/`,
      authHeaders(token)
    )
  },

  async getTreatmentsList(token) {
    return axios.get(
      `${process.env.VUE_APP_BACKEND_PROTOCOL}://${process.env.VUE_APP_BACKEND_HOST}:${process.env.VUE_APP_BACKEND_PORT}/api/treatment-kinds/`,
      authHeaders(token)
    )
  },
}
